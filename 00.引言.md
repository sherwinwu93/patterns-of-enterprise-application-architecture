### 引言
#### 0.1 架构
架构的定义,很难统一.能够统一的内容有两点:
1. 最高层次的系统分解
2. 系统中不易改变的决定.

越来越多的人发现:对于架构上意义重大的看法也会随着系统的生命周期变化.

#### 0.2 企业应用
企业应用某些方面要比电信软件简单得多--多线程问题没有那么困难,无需关注硬件设备与软件的集成.<br/>
但是,某些方面,企业应用又比电信软件复杂得多--企业应用一般都涉及大量复杂数据,而且必须处理很多"不合逻辑"的业务规则.

1. 企业应用一般都涉及持久化数据.<br/>
有些数据的生命周期往往比最初生成它们的硬件、操作系统和编译器还要长.甚至公司安装了一套全新的软件,这些数据也必须被"迁移"到全新的
应用上.

2. 企业应用一般都涉及大量数据.<br/>
数据以数百万条记录的方式存在.早期常常使用索引文件系统,现代的系统往往采用关系型数据库.数据库的设计和演化已使其成为新的技术领域.

3. 企业应用一般还涉及很多人同时访问数据.<br/>
对于一些基于Web的系统,人数会呈指数级增长.要确保这些人都正确地访问数据,就一定会存在这样或那样的问题.即使人数没有那么多,确保两个
人同时操作同一数据项不出现错误,也是存在问题的.事务管理工具可以处理这个问题,但是通常无法做到对应用开发者透明.

4. 企业应用还涉及大量操作数据的用户界面屏幕.用户使用频率差异很大,也没有什么技术背景.

5. 企业应用通常需要与散布在企业周围的其它企业应用集成.<br/>
企业经常希望使用一种统一的通信技术来集成所有系统.当然,每次这样的集成工作几乎很难真正实现,所以留下来就是一个个风格各异的集成环境.
当商业用户需要同其业务伙伴进行应用集成时,情况就更糟糕.

6. 即使统一了集成技术,还是会遇到业务过程中的差异以及数据中概念的不一致性.<br/>
每个部门对客户的定义方式不同.可能造成几百个记录中的每个字段都有可能存在细微差别,问题的规模就会形成不小的挑战--就算唯一知道这些
字段之间差别的员工还在公司任职.这样,数据就必须被不停地读取、合并,然后写成不同语法和语义的格式.

7. 然后是"业务逻辑"带来的.<br/>
"业务逻辑"这个词是很滑稽,因为很难再找出什么东西比"业务逻辑"更加没有逻辑.各种各样的理由导致成千上万的这类"一次性特殊情况"最终导
致了复杂的业务"无逻辑"使得商业软件开发那么困难.在这种情况下,必须尽量将这些业务逻辑组织成有效的方式,因为我们可以确定是,这些"逻辑"
一定会随着时间不断变化.

最好通过简化架构和过程,将一个大型项目简化成小型项目.

#### 0.3 企业应用的种类
企业应用是多种多样的,不同的问题将导致不同的处理方法.进行选择的空间很大,但我只选三个方面:
1. B2C的网上零售商: 资源利用的有效性,系统的可伸缩性.业务逻辑可以非常简单.
2. 租约合同自动处理系统: 用户少,业务逻辑却比较复杂.规则的随意性很大,才使得像这样一个复杂的业务领域具有挑战性.甚至复杂的数据库设
计方案中可能会涉及200多个表以及有关资产评估和计价的软件包.
3. 开支跟中系统:一方面必须快速地开发出它,另一方面又必须为它可能的发展考虑.

选择架构时,必须很清楚地了解面临的问题,在理解的基础上再来选择合适的设计.不同的工具擅长处理的方面不同,切记不要用错了工具,否则只会
事倍功半.
#### 0.4 关于性能的考虑
首先建立系统,调试运行,然后基于测量的严格的优化过程来提高性能.

在你的系统中,需要自行决定是否进行优化.做性能优化后,一定要与优化前进行测量对比,以确定真的得到优化,否则,你可能只是破坏了代码的可
读性.<br/>

配置上的重大变化会使得某些性能优化失效.因此,在升级硬件,软件到新的版本时,必须重新确认性能优化工作的有效性.很多情况下,配置变更都
会对性能优化有影响,有时候你真的会发现,以前为了提升性能做的优化,在新的环境下居然影响性能.

术语:
1. 响应时间: 系统处理一次外部请求处理所需的时间.
2. 响应性: 系统响应请求的速度有多快.比如文件拷贝过程中,为用户提供一个"进展条".
3. 等待时间: 获得系统任何形式响应的最小时间,即使应该做的工作并不存在.尽量避免远程调用.
4. 吞吐率: 给定时间内能够处理多大的请求量.对于企业应用来说,吞吐率通常用每秒事务数tps来度量.这种方法的一个问题是指标依赖于事务的
复杂程度.
5. 负载: 对于系统当前负荷的表述,也许可以用当前有多少用户与系统相连来表示.
6. 负载敏感度:指响应时间随负载变化的程度.
7. 效率: 性能除以资源.
8. 容量: 最大有效负载或吞吐率的指标
9. 可伸缩性度量:向系统中增加资源(通常是硬件)对系统性能的影响.

从用户角度而言,响应性往往比响应时间更重要.因此,为了提高响应性而损失一些响应时间或者吞吐率是值得的.

#### 0.5 模式
建筑模式: 每一个模式描述了一个在我们周围不断重复发生的问题以及该问题解决方案的核心.这样,你就能一次又一次地使用该方案而不必做重复劳
动.

模式的核心是特定的解决方案,它有效而且有足够的通用性,能解决重复出现的问题.模式的另一种视角是把它看成一组建议,而创造模式的艺术则是
将很多建议分解开来,形成相互独立的组.

模式的关键点是源于实践.必须观察人们的工作过程,发现其中好的设计,并找出"这些解决方案的核心".

#### 0.5.1 模式的结构
1. 模式的名字
2. 意图: 用一两句总结模式
3. 概要: 模式的可视化表示,通常是一个UML图
4. 动机:
4.1. 运行机制: 解决方案
4.2. 使用时机: 模式何时被使用

#### 0.5.2 模式的局限性
所有模式都是不完备的,我们都有责任在自己的系统去完备它们,也会从中获取乐趣.


